//
//   Generated by https://github.com/blacktop/ipsw (Version: 3.1.454, BuildTime: 2024-02-08T22:07:34Z)
//
//    - LC_BUILD_VERSION:  Platform: watchOSSimulator, MinOS: 10.2, SDK: 10.2, Tool: ld (902.8)
//    - LC_SOURCE_VERSION: 685.60.2.0.0
//
#ifndef TKSmartCardSlotEngine_h
#define TKSmartCardSlotEngine_h
@import Foundation;

#include "NSXPCListenerDelegate-Protocol.h"
#include "TKPowerMonitor.h"
#include "TKProtocolSmartCardSlot-Protocol.h"
#include "TKSmartCardATR.h"
#include "TKSmartCardSessionEngine.h"

@class NSHashTable, NSMapTable, NSMutableArray, NSString, NSXPCConnection, NSXPCListener, NSXPCListenerEndpoint;
@protocol OS_dispatch_queue, OS_dispatch_source, OS_os_log, TKSmartCardSlotEngineDelegate;

@interface TKSmartCardSlotEngine : NSObject<TKProtocolSmartCardSlot, NSXPCListenerDelegate> {
  /* instance variables */
  unsigned long long _lastId;
  long long _state;
  long long _powerState;
  long long _previousState;
  TKSmartCardATR *_atr;
  unsigned long long _protocol;
  NSObject<OS_dispatch_source> *_idlePowerDownSource;
  NSXPCConnection *_registrationConnection;
  NSXPCListener *_listener;
  NSHashTable *_clients;
  NSMutableArray *_sessionRequests;
  NSMapTable *_stateRequests;
  NSMapTable *_reservations;
  TKPowerMonitor *_powerMonitor;
  NSObject<OS_os_log> *_log;
}

@property (weak) NSObject<TKSmartCardSlotEngineDelegate> *delegate;
@property (readonly) NSString *name;
@property (retain) NSObject<OS_dispatch_queue> *queue;
@property (retain) NSObject<OS_dispatch_queue> *powerRequestsQueue;
@property BOOL apduSentSinceLastReset;
@property (weak) TKSmartCardSessionEngine *session;
@property long long maxInputLength;
@property long long maxOutputLength;
@property BOOL securePINVerificationSupported;
@property BOOL securePINChangeSupported;
@property (retain) NSXPCListenerEndpoint *serverEndpoint;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;

/* class methods */
+ (void)set_testing_stateDelay:(id)delay;
+ (id)_testing_stateDelay;

/* instance methods */
- (id)init;
- (void)logWithBytes:(id)bytes handler:(id /* block */)handler;
- (BOOL)setupWithName:(id)name delegate:(id)delegate;
- (id)slotRegistryWithErrorHandler:(id /* block */)handler;
- (BOOL)_setupWithName:(id)name delegate:(id)delegate;
- (BOOL)listener:(id)listener shouldAcceptNewConnection:(id)connection;
- (void)observeValueForKeyPath:(id)path ofObject:(id)object change:(id)change context:(void *)context;
- (id)dictionaryForState:(long long)state;
- (void)_changeStateTo:(id)to forClient:(id)client;
- (void)changeStateTo:(long long)to powerState:(long long)state;
- (void)waitForNextState:(long long)state reply:(id /* block */)reply;
- (void)waitForStateFlushedWithReply:(id /* block */)reply;
- (BOOL)reset;
- (BOOL)setProtocol:(unsigned long long)protocol;
- (void)powerDownWithEject:(BOOL)eject;
- (void)scheduleIdlePowerDown;
- (void)cardPresent:(BOOL)present;
- (void)setupSlotWithReply:(id /* block */)reply;
- (BOOL)connectCardSessionWithParameters:(id)parameters;
- (void)leaveSession:(id)session;
- (void)sessionWithParameters:(id)parameters reply:(id /* block */)reply;
- (id)_findReservation:(id)reservation connection:(id)connection;
- (id)_getReservationId;
- (void)reserveProtocols:(id)protocols reservationId:(id)id exclusive:(BOOL)exclusive reply:(id /* block */)reply;
- (void)sendControl:(id)control data:(id)data expectedLength:(unsigned int)length reply:(id /* block */)reply;
- (void)getAttrib:(unsigned int)attrib reply:(id /* block */)reply;
- (void)setAttrib:(unsigned int)attrib data:(id)data reply:(id /* block */)reply;
- (void)runUserInteraction:(id)interaction reply:(id /* block */)reply;
- (void)terminate;
- (void)dealloc;
@end

#endif /* TKSmartCardSlotEngine_h */
